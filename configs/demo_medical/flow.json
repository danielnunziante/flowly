{
  "version": "1.0",
  "states": {
    "MENU": {
      "type": "interactive_buttons",
      "header_media": {
        "type": "image",
        "path": "header_welcome.png"
      },
      "body": "Hola *{{name}}* üëã\n\nSoy el asistente de **Flowly**. En este demo podr√°s ver c√≥mo gestionamos clientes, turnos y contenido multimedia de forma automatizada.\n\nPod√©s ir seleccionando las distintas opciones para navegar por el men√∫ de prueba.",
      "buttons": {
        "footer": "Flowly Demo v1.0",
        "buttons": [
          {
            "id": "BTN_START",
            "title": "üöÄ Empezar demo"
          }
        ]
      },
      "on_select_next": {
        "BTN_START": "SEGMENTATION"
      }
    },
    "SEGMENTATION": {
      "type": "interactive_buttons",
      "body": "Bienvenido a la demo.\n\nContanos, ¬øYa sos cliente registrado o quer√©s informaci√≥n?",
      "buttons": {
        "buttons": [
          {
            "id": "BTN_ROLE_CLIENT",
            "title": "üë§ S√≠, soy cliente"
          },
          {
            "id": "BTN_ROLE_INFO",
            "title": "üè¢ No, quiero info"
          }
        ]
      },
      "on_select_next": {
        "BTN_ROLE_CLIENT": "CLIENT_LOGIN_INPUT",
        "BTN_ROLE_INFO": "INFO_MENU"
      }
    },
    "INFO_MENU": {
      "type": "interactive_list",
      "body": "¬°Excelente! Flowly reduce el tiempo de atenci√≥n permitiendo que tu personal se enfoque en tareas clave.\n\nDecime, ¬øSobre cu√°l de estos temas quisieras m√°s informaci√≥n?",
      "list": {
        "header": "Flowly Demo",
        "button_text": "Ver Opciones",
        "footer": "Seleccion√° un tema",
        "sections": [
          {
            "title": "Funciones Principales",
            "rows": [
              {
                "id": "OPT_CRM",
                "title": "Conexi√≥n CRM",
                "description": "Integraci√≥n base de datos"
              },
              {
                "id": "OPT_AGENDA",
                "title": "Manejo de Agenda",
                "description": "Turnos y recordatorios"
              }
            ]
          },
          {
            "title": "Multimedia & Pagos",
            "rows": [
              {
                "id": "OPT_PDF",
                "title": "Env√≠o de Archivos",
                "description": "PDF, Docs, Im√°genes"
              },
              {
                "id": "OPT_PAGOS",
                "title": "Pagos",
                "description": "Integraci√≥n pasarelas"
              },
              {
                "id": "OPT_HANDOFF",
                "title": "Asistencia Humana",
                "description": "Derivaci√≥n a agente"
              }
            ]
          }
        ]
      },
      "on_select_next": {
        "OPT_PDF": "DEMO_PDF",
        "OPT_CRM": "EXPLAIN_CRM",
        "OPT_AGENDA": "EXPLAIN_AGENDA",
        "OPT_PAGOS": "EXPLAIN_PAGOS",
        "OPT_HANDOFF": "DEMO_HANDOFF"
      }
    },
    "CLIENT_LOGIN_INPUT": {
      "type": "text",
      "body": "Perfecto {{name}} üîé.\n\nEscrib√≠ tu DNI **sin puntos ni espacios** para buscarte en nuestra base de clientes.\n\n_(Tip demo: escrib√≠ '1234')_",
      "on_text_next": "CLIENT_DASHBOARD"
    },
    "CLIENT_DASHBOARD": {
      "type": "interactive_buttons",
      "action": "mock_crm_lookup",
      "header_media": {
        "type": "image",
        "path": "header_dashboard.png"
      },
      "body": "¬øC√≥mo est√°s **{{client_name}}**? Un gusto volver a hablar con vos.\n\nContame, ¬øSobre qu√© tema quer√©s consultar hoy?",
      "buttons": {
        "buttons": [
          {
            "id": "BTN_AGENDAR",
            "title": "üìÖ Agendar Turno"
          },
          {
            "id": "BTN_PAGAR",
            "title": "üí≥ Pagar Cuota"
          },
          {
            "id": "BTN_LOGOUT",
            "title": "üîì Salir"
          }
        ]
      },
      "on_select_next": {
        "BTN_AGENDAR": "SELECT_DATE",
        "BTN_PAGAR": "CLIENT_PAGOS_MOCK",
        "BTN_LOGOUT": "MENU"
      }
    },
    "SELECT_DATE": {
      "type": "interactive_list",
      "action": "get_calendar_slots",
      "body": "Perfecto, estos son los pr√≥ximos turnos disponibles:",
      "list": {
        "header": "Agenda",
        "button_text": "Ver horarios",
        "footer": "Horarios disponibles",
        "sections": [
          {
            "title": "Pr√≥ximos turnos",
            "rows": [
              {
                "id": "SLOT_1",
                "title": "Opci√≥n 1",
                "description": "{{slot_1}}"
              },
              {
                "id": "SLOT_2",
                "title": "Opci√≥n 2",
                "description": "{{slot_2}}"
              },
              {
                "id": "SLOT_3",
                "title": "Opci√≥n 3",
                "description": "{{slot_3}}"
              }
            ]
          }
        ]
      },
      "on_select_next": {
        "SLOT_1": "CONFIRM_APPOINTMENT",
        "SLOT_2": "CONFIRM_APPOINTMENT",
        "SLOT_3": "CONFIRM_APPOINTMENT"
      }
    },
    "CONFIRM_APPOINTMENT": {
      "type": "text",
      "action": "schedule_appointment",
      "body": "‚úÖ ¬°Listo! Turno confirmado.\n\nPaciente: {{client_name}}\nFecha (ISO): {{appointment_confirm_time}}\n\nTe llegar√° un recordatorio por este chat.",
      "on_text_next": "CLIENT_DASHBOARD"
    },
    "DEMO_PDF": {
      "type": "text",
      "body": "Ac√° ten√©s el archivo solicitado üìÑ. El sistema puede enviar presupuestos o estudios autom√°ticamente.\n\nArchivo demo: https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",
      "on_text_next": "RETURN_MENU"
    },
    "EXPLAIN_CRM": {
      "type": "text",
      "body": "ü§ñ **CRM Connect**\n\nNos conectamos a tu API para leer y escribir datos. Identificamos al cliente por su tel√©fono o DNI para darle un trato personalizado.",
      "on_text_next": "RETURN_MENU"
    },
    "EXPLAIN_AGENDA": {
      "type": "text",
      "body": "üìÖ **Agenda Inteligente**\n\nNos integramos con Google Calendar o tu sistema de turnos. El bot lee horarios disponibles en tiempo real y agenda sin intervenci√≥n humana.",
      "on_text_next": "RETURN_MENU"
    },
    "EXPLAIN_PAGOS": {
      "type": "text",
      "body": "üí≥ **Pasarela de Pagos**\n\nPodemos generar links de pago de MercadoPago o Stripe y enviarlos en el chat. Al confirmar el pago, el bot puede emitir la factura.",
      "on_text_next": "RETURN_MENU"
    },
    "DEMO_HANDOFF": {
      "type": "text",
      "body": "üë®‚Äçüíª **Derivaci√≥n Humana**\n\nEl bot se pausa y notifica a tu equipo de atenci√≥n. Toda la conversaci√≥n previa queda disponible para el agente.",
      "on_text_next": "RETURN_MENU"
    },
    "CLIENT_PAGOS_MOCK": {
      "type": "text",
      "body": "üí∞ **Estado de Cuenta**\n\nTen√©s una factura pendiente. Pod√©s pagarla ac√°:\nhttps://link.mercadopago.com.ar/demo",
      "on_text_next": "CLIENT_DASHBOARD"
    },
    "RETURN_MENU": {
      "type": "interactive_buttons",
      "body": "¬øQuer√©s ver algo m√°s?",
      "buttons": {
        "buttons": [
          {
            "id": "BTN_BACK_INFO",
            "title": "üîô Ver Men√∫"
          },
          {
            "id": "BTN_RESTART",
            "title": "üè† Inicio"
          }
        ]
      },
      "on_select_next": {
        "BTN_BACK_INFO": "INFO_MENU",
        "BTN_RESTART": "MENU"
      }
    }
  }
}
